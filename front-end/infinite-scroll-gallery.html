<!DOCTYPE html>
<html lang="en" style="--n: 18">
<head>
    <meta charset="UTF-8">
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link crossorigin href="https://fonts.gstatic.com" rel="preconnect">
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@500&family=Saira:ital@0;1&family=Sour+Gummy:wdth,wght@125,300&display=swap"
          rel="stylesheet">
    <title>Infinite scroll gallery</title>
    <style>
        @property --k {
            syntax: '<number>';
            initial-value: -1;
            inherits: true
        }

        @property --ang {
            syntax: '<angle>';
            initial-value: 0deg;
            inherits: false
        }

        * {
            margin: 0
        }

        html {
            scrollbar-width: none;
            height: calc(var(--n) * 100%)
        }

        body, header, main, section,
        article, figure {
            display: grid
        }

        body {
            --dir: 0;
            grid-template-rows: max-content 1fr max-content;
            position: fixed;
            width: 100%;
            height: 100vh;
            height: 100dvh;
            color: #dedede;
            font: clamp(.625em, 3vmin, 1.5em)/ 1.25 saira, sans-serif;
            animation: k 1s linear;
            animation-timeline: scroll();

            &::before {
                position: absolute;
                inset: 0;
                z-index: -1;
                background: #000;
                filter: url(#grain);
                content: ''
            }

            @media (max-aspect-ratio: 2/ 3) {
                --dir: 1
            }
        }

        @keyframes k {
            to {
                --k: 1
            }
        }

        svg[height='0'][aria-hidden='true'] {
            position: fixed
        }

        header {
            place-content: center;
            place-items: center;
            padding: .5em;
            text-align: center;
            text-wrap: balance
        }

        em {
            max-width: 32em
        }

        main {
            overflow: hidden;
            perspective: 50em
        }

        section, article {
            transform-style: preserve-3d
        }

        section {
            --r: calc(2 + var(--dir))/ 3;
            --w: clamp(4em, min(50vh, 25vw), 18em);
            --z: calc(var(--f, 1.25) * -.5 * var(--w) / tan(.5turn / var(--n)));
            place-self: center;
            translate: 0 0 var(--z);
            rotate: var(--dir) calc(1 - var(--dir)) 0 calc((var(--k) + .5) * -1turn);
        }

        article, header, figure, img, figcaption {
            grid-area: 1/ 1
        }

        article {
            /* item progress value */
            --j: var(--i)/var(--n);
            /* linear difference between this item's progress value
             * and progress value of highlighted item in front -
             * it's a value in the [0, 1] interval */
            --dif-lin: calc(var(--j) - mod(var(--k) +1, 1));
            /* absolute value of linear difference */
            --abs-lin: abs(var(--dif-lin));
            /* difference between middle & absolute linear difference */
            --dif-mid: calc(.5 - var(--abs-lin));
            --abs-mid: abs(var(--dif-mid));
            /* relative distance to from this item
             * to highlighted one in front */
            --dif-arc: calc(2 * (.5 - var(--abs-mid)));
            /* relative distance limit */
            --lim: .35;
            --sel: max(0, calc((var(--lim) - var(--dif-arc)) / var(--lim)));
            --out: calc(1 - var(--sel));
            --hov: 0;
            width: var(--w);
            aspect-ratio: var(--r);
            transform: rotate3d(var(--dir), calc(1 - var(--dir)), 0, calc(var(--j) * 1turn)) translatez(var(--z)) rotate(calc(var(--dir) * .5turn));

            header {
                rotate: y calc((1 + var(--hov)) * .5turn)
            }

            &:hover, &:focus-within {
                --hov: round(var(--sel))
            }

            @supports not (scale: abs(-1)) {
                --abs-lin: max(var(--dif-lin), -1 * var(--dif-lin));
                --abs-mid: max(var(--dif-mid), -1 * var(--dif-mid))
            }
        }

        article header, figure {
            --ang: calc(-45deg + var(--hov) * 180deg);
            overflow: hidden;
            position: relative;
            border: solid 4px #0000;
            border-radius: .5em;
            backface-visibility: hidden;
            box-shadow: 5px 5px 13px #000;
            background: var(--url) 50%/ cover padding-box,
            linear-gradient(#666 0 0) padding-box,
            repeating-conic-gradient(from var(--ang),
                    #0000 0% 15%,
                    color-mix(in srgb,
                            #f48c06 calc(var(--sel) * 100%), #333) 20% 30%,
                    #0000 35% 50%) border-box #121212;
            background-blend-mode: multiply, normal, normal;
            isolation: isolate;
            /* prevent edge glitching on article hover */
            pointer-events: none;
            transition: .35s ease-out;
            transition-property: rotate, --ang;

            &::after {
                position: absolute;
                inset: 0;
                opacity: var(--out);
                background: #03071e;
                mix-blend-mode: color;
                pointer-events: none;
                content: ''
            }
        }

        /* reverse from parent */
        h2, em, img, a {
            pointer-events: auto
        }

        h2, em, figcaption {
            opacity: round(up, var(--sel));
            text-shadow: 1px 1px 1px #0006
        }

        h2 {
            font-size: 1.125em
        }

        figure {
            rotate: y calc(var(--hov) * .5turn)
        }

        img {
            width: 100%;
            height: 100%;
            aspect-ratio: var(--r);
            object-fit: cover;
            object-position: var(--pos)
        }

        figcaption {
            align-self: end;
            padding: .5em;
            background: #fff3;
            color: #040404;
            font: Max(.75rem, .75em) caveat, cursive;
            text-align: right;
            backdrop-filter: blur(5px) brightness(1.5);

            a {
                color: #370617
            }
        }

        /* just support info boxes if it lacks support */
        aside {
            position: fixed;
            bottom: 0;
            padding: .5em;
        }

        .box-info-scrollani {
            margin: .5em;
            border-left: solid 5px #dc3055;
            padding: .75em;
            box-shadow: 2px 2px 5px hsla(0, 0%, 0%, .35);
            background: #851d40;
            color: #fff;
            font: 1em/ 1.25 ubuntu, trebuchet ms, arial, sans-serif;

            @supports (animation-timeline: scroll()) {
                display: none
            }
        }

        kbd {
            padding: 2px;
            background: hsla(0, 0%, 0%, .35);
            font: 1.1em/ 1.2 ubuntu mono, consolas, monaco, monospace
        }
    </style>
</head>
<body>
<svg aria-hidden="true" height="0" width="0">
    <filter id="grain">
        <feTurbulence baseFrequency="7.13" type="fractalNoise"></feTurbulence>
        <feColorMatrix type="saturate" values="0"></feColorMatrix>
        <feComponentTransfer>
            <feFuncA slope=".02" type="linear"></feFuncA>
        </feComponentTransfer>
        <feBlend in2="SourceGraphic"></feBlend>
    </filter>
</svg>
<header><h1>Infinite scroll circular gallery</h1><strong>scroll up & down/ use up & down arrow keys</strong><em>mostly
    CSS scroll-driven animations (for rotating gallery on scroll) + tiniest bit of JS (for infinite cycling part, ~200
    bytes minified)</em></header>
<main class="scene">
    <section class="assembly">
        <article
                style="--i: 0; --url: url(https://images.unsplash.com/photo-1583499871880-de841d1ace2a?h=900); --pos: 47% 35%">
            <header><h2>Lion</h2><em>Panthera leo</em></header>
            <figure><img alt="lion couple kissing on a brown rock"
                         src="https://images.unsplash.com/photo-1583499871880-de841d1ace2a?h=900"/>
                <figcaption>by <a href="https://unsplash.com/photos/lion-lying-on-brown-rock-MUeeyzsjiY8"
                                  target="_blank">Clément Roy</a></figcaption>
            </figure>
        </article>
        <article
                style="--i: 1; --url: url(https://images.unsplash.com/photo-1571406761758-9a3eed5338ef?h=900); --pos: 75% 65%">
            <header><h2>Asiatic elephant</h2><em>Elephas maximus</em></header>
            <figure><img alt="herd of Sri Lankan elephants walking away from a river"
                         src="https://images.unsplash.com/photo-1571406761758-9a3eed5338ef?h=900"/>
                <figcaption>by <a href="https://unsplash.com/photos/shallow-focus-photo-of-black-elephants-hZhhVLLKJQ4"
                                  target="_blank">Alex Azabache</a></figcaption>
            </figure>
        </article>
        <article
                style="--i: 2; --url: url(https://images.unsplash.com/photo-1619664208054-41eefeab29e9?h=900); --pos: 53% 43%">
            <header><h2>Red-tailed black cockatoo</h2><em>Calyptorhynchus banksii</em></header>
            <figure><img alt="close-up of a black cockatoo"
                         src="https://images.unsplash.com/photo-1619664208054-41eefeab29e9?h=900"/>
                <figcaption>by <a
                        href="https://unsplash.com/photos/black-and-brown-bird-in-close-up-photography-LkrOEupiVt8"
                        target="_blank">David Clode</a></figcaption>
            </figure>
        </article>
        <article
                style="--i: 3; --url: url(https://images.unsplash.com/photo-1662841238473-f4b137e123cb?h=900); --pos: 65% 65%">
            <header><h2>Dromedary</h2><em>Camelus dromedarius</em></header>
            <figure><img alt="camel and her new born calf walking in the Sahara desert"
                         src="https://images.unsplash.com/photo-1662841238473-f4b137e123cb?h=900"/>
                <figcaption>by <a href="https://unsplash.com/photos/a-group-of-camels-in-a-desert-uIzCnO-gOrw"
                                  target="_blank">Moaz Tobok</a></figcaption>
            </figure>
        </article>
        <article
                style="--i: 4; --url: url(https://images.unsplash.com/photo-1589648751789-c8ecb7a88bd5?h=900); --pos: 50% 25%">
            <header><h2>Polar bear</h2><em>Ursus maritimus</em></header>
            <figure><img alt="polar bear on the snow, by the water, raised on the hind legs, front paws together"
                         src="https://images.unsplash.com/photo-1589648751789-c8ecb7a88bd5?h=900"/>
                <figcaption>by <a
                        href="https://unsplash.com/photos/polar-bear-on-snow-covered-ground-during-daytime-AZ31hv9kdzE"
                        target="_blank">Hans-Jurgen Mager</a></figcaption>
            </figure>
        </article>
        <article
                style="--i: 5; --url: url(https://images.unsplash.com/photo-1662187554571-f54ea9657d88?h=900); --pos: 47%">
            <header><h2>Waterbuck</h2><em>Kobus ellipsiprymnus</em></header>
            <figure><img alt="waterbuck in a field, looking at the camera"
                         src="https://images.unsplash.com/photo-1662187554571-f54ea9657d88?h=900"/>
                <figcaption>by <a href="https://unsplash.com/photos/a-deer-with-antlers-in-a-field-jVvl_2cQO5s"
                                  target="_blank">Jonathan Gensicke</a></figcaption>
            </figure>
        </article>
        <article
                style="--i: 6; --url: url(https://images.unsplash.com/photo-1659540181281-1d89d6112832?h=900); --pos: 47%">
            <header><h2>Giant panda</h2><em>Ailuropoda melanoleuca</em></header>
            <figure><img alt="giant panda hanging from a tree branch"
                         src="https://images.unsplash.com/photo-1659540181281-1d89d6112832?h=900"/>
                <figcaption>by <a href="https://unsplash.com/photos/a-panda-bear-in-a-tree-e0mrn3XDatU" target="_blank">Jiachen
                    Lin</a></figcaption>
            </figure>
        </article>
        <article
                style="--i: 7; --url: url(https://images.unsplash.com/photo-1526095179574-86e545346ae6?h=900); --pos: 65% 35%">
            <header><h2>Grévy's zebra</h2><em>Equus grevyi</em></header>
            <figure><img alt="zebra standing on wheat field, looking back towards the camera"
                         src="https://images.unsplash.com/photo-1526095179574-86e545346ae6?h=900"/>
                <figcaption>by <a href="https://unsplash.com/photos/zebra-standing-on-wheat-field-ZqYPM8i60F8"
                                  target="_blank">Jeff Griffith</a></figcaption>
            </figure>
        </article>
        <article style="--i: 8; --url: url(https://images.unsplash.com/photo-1541707519942-08fd2f6480ba?h=900)">
            <header><h2>Cheetah</h2><em>Acinonyx jubatus</em></header>
            <figure><img alt="cheetah sitting in the grass under a blue sky"
                         src="https://images.unsplash.com/photo-1541707519942-08fd2f6480ba?h=900"/>
                <figcaption>by <a href="https://unsplash.com/photos/leopard-sitting-on-grass-field-3pekyY0-yOw"
                                  target="_blank">Mike Bird</a></figcaption>
            </figure>
        </article>
        <article
                style="--i: 9; --url: url(https://images.unsplash.com/photo-1595792419466-23cec2476fa6?h=900); --pos: 35%">
            <header><h2>King penguin</h2><em>Aptenodytes patagonicus</em></header>
            <figure><img alt="king penguin with a fluffy brown chick on grey rocks"
                         src="https://images.unsplash.com/photo-1595792419466-23cec2476fa6?h=900"/>
                <figcaption>by <a href="https://unsplash.com/photos/white-and-black-penguin-on-gray-rock-o4snRPEZRRs"
                                  target="_blank">Martin Wettstein</a></figcaption>
            </figure>
        </article>
        <article style="--i: 10; --url: url(https://images.unsplash.com/photo-1689799513565-44d2bc09d75b?h=900)">
            <header><h2>Red panda</h2><em>Ailurus fulgens</em></header>
            <figure><img alt="a red panda in a tree"
                         src="https://images.unsplash.com/photo-1689799513565-44d2bc09d75b?h=900"/>
                <figcaption>by <a href="https://unsplash.com/photos/a-red-panda-is-sitting-in-a-tree-oVNDSIUQrdc"
                                  target="_blank">Niels Baars</a></figcaption>
            </figure>
        </article>
        <article
                style="--i: 11; --url: url(https://images.unsplash.com/photo-1651611136918-a8a2f8bba419?h=900); --pos: 43% 47%">
            <header><h2>Leopard</h2><em>Panthera pardus</em></header>
            <figure><img alt="pensive young leopard on a rock"
                         src="https://images.unsplash.com/photo-1651611136918-a8a2f8bba419?h=900"/>
                <figcaption>by <a href="https://unsplash.com/photos/a-leopard-lying-on-a-rock-VDESlNV85qE"
                                  target="_blank">Andy Silby</a></figcaption>
            </figure>
        </article>
        <article
                style="--i: 12; --url: url(https://images.unsplash.com/photo-1624210146024-1046a266038e?h=900); --pos: 65% 35%">
            <header><h2>Hyacinth macaw</h2><em>Anodorhynchus hyacinthinus</em></header>
            <figure><img alt="two hyacinth macaws on a tree branch"
                         src="https://images.unsplash.com/photo-1624210146024-1046a266038e?h=900"/>
                <figcaption>by <a
                        href="https://unsplash.com/photos/blue-and-yellow-macaw-on-brown-tree-branch-during-daytime-wKFd2EhyRAY"
                        target="_blank">Juliana e Mariana Amorim</a></figcaption>
            </figure>
        </article>
        <article style="--i: 13; --url: url(https://images.unsplash.com/photo-1567600868213-60eb570ae39f?h=900)">
            <header><h2>Red kangaroo</h2><em>Osphranter rufus</em></header>
            <figure><img alt="kangaroo in the grass"
                         src="https://images.unsplash.com/photo-1567600868213-60eb570ae39f?h=900"/>
                <figcaption>by <a href="https://unsplash.com/photos/brown-kangaroo-eziyddL2OR4" target="_blank">Jordyn
                    Montague</a></figcaption>
            </figure>
        </article>
        <article
                style="--i: 14; --url: url(https://images.unsplash.com/photo-1639231554431-ebce02bdeacc?h=900); --pos: 50% 25%">
            <header><h2>Snow leopard</h2><em>Panthera uncia</em></header>
            <figure><img alt="snow leopard sitting on top of a rock, its big fluffy tail hanging down"
                         src="https://images.unsplash.com/photo-1639231554431-ebce02bdeacc?h=900"/>
                <figcaption>by <a href="https://unsplash.com/photos/a-snow-leopard-sitting-on-top-of-a-rock-JXECZL83E6M"
                                  target="_blank">Simon Schwyter</a></figcaption>
            </figure>
        </article>
        <article style="--i: 15; --url: url(https://images.unsplash.com/photo-1723979757235-73c4767ced1d?h=900)">
            <header><h2>Sumatran orangutan</h2><em>Pongo abelii</em></header>
            <figure><img alt="close-up of a pensive male orangutan"
                         src="https://images.unsplash.com/photo-1723979757235-73c4767ced1d?h=900"/>
                <figcaption>by <a
                        href="https://unsplash.com/photos/a-close-up-of-a-monkey-with-a-smile-on-its-face-uLkwLM7Uw48"
                        target="_blank">Fahrul Razi</a></figcaption>
            </figure>
        </article>
        <article
                style="--i: 16; --url: url(https://images.unsplash.com/photo-1500467525088-aafe28c0a95e?h=900); --pos: 57%">
            <header><h2>Tiger</h2><em>Panthera tigris</em></header>
            <figure><img alt="close-up of a pensive tiger lying on the ground"
                         src="https://images.unsplash.com/photo-1500467525088-aafe28c0a95e?h=900"/>
                <figcaption>by <a
                        href="https://unsplash.com/photos/selective-focus-of-tiger-laying-on-ground-LNSIGPuZXIg"
                        target="_blank">Frida Lannerström</a></figcaption>
            </figure>
        </article>
        <article
                style="--i: 17; --url: url(https://images.unsplash.com/photo-1692373202439-4b13694c8a68?h=900); --pos: 43% 35%">
            <header><h2>Brown bear</h2><em>Ursus arctos</em></header>
            <figure><img alt="brown bear in the forest, sticking tongue out"
                         src="https://images.unsplash.com/photo-1692373202439-4b13694c8a68?h=900"/>
                <figcaption>by <a
                        href="https://unsplash.com/photos/a-brown-bear-standing-in-the-middle-of-a-forest-ErfqBlV3AEo"
                        target="_blank">Alexandru-Bogdan Ghita</a></figcaption>
            </figure>
        </article>
    </section>
</main>
<footer></footer><!-- just support info-->
<aside><p class="box-info-scrollani">Sorry, your browser does not appear to support scroll-driven animation. As of
    January 2025, this is supported in Firefox if the <kbd>layout.css.scroll-driven-animations.enabled</kbd> flag is set
    to true in <kbd>about:config</kbd> and in Chromium browsers. Safari support is coming, but it hasn't arrived yet.
</p></aside>
<script>
    function f(k) {
        if (Math.abs(k) > .5)
            scrollTo(0, .5 * (k - Math.sign(k) + 1) * (document.documentElement.offsetHeight - window.innerHeight))
    }

    f(-1);

    addEventListener('scroll', e => f(+getComputedStyle(document.body).getPropertyValue('--k')))
</script>
</body>
</html>
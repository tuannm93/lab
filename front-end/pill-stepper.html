<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <title>Pill Stepper</title>

    <style>
        * {
            border: 0;
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        :root {
            --hue: 223deg;
            --sat: 10%;
            --gray1: hsl(var(--hue) var(--sat) 95%);
            --gray10: hsl(var(--hue) var(--sat) 5%);
            --primary4: hsl(var(--hue) 90% 65%);
            --primary5: hsl(var(--hue) 90% 55%);
            --trans-dur: 0.3s;
            --trans-timing: cubic-bezier(0.65, 0, 0.35, 2);
            color-scheme: light dark;
            font-size: clamp(1.5rem, 1.4rem + 0.5vw, 2rem);
        }

        body,
        button {
            color: light-dark(var(--gray10), var(--gray1));
            font: 1em/1.5 -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            background-color: light-dark(var(--gray1), var(--gray10));
            display: grid;
            place-items: center;
            height: 100vh;
            transition: background-color var(--trans-dur), color var(--trans-dur);
        }

        main {
            padding: 1.5em 0;
        }

        .stepper {
            --border-width: 3px;
            display: flex;
            gap: 0.75em;
            align-items: center;
        }

        .stepper__label {
            min-width: 1ch;
        }

        .stepper__wrapper {
            border-radius: 1.125em;
            box-shadow: 0 0 0 var(--border-width) inset;
            position: relative;
        }

        [dir=rtl] .stepper__wrapper {
            transform: scaleX(-1);
        }

        .stepper__control {
            border-radius: inherit;
            overflow: hidden;
            position: relative;
            width: 10em;
            height: 2.25em;
        }

        .stepper__button, .stepper__icon {
            flex: 1;
        }

        .stepper__button {
            background-color: light-dark(var(--gray10), var(--gray1));
            box-shadow: -1.25em 0 0 light-dark(var(--gray10), var(--gray1));
            color: light-dark(var(--gray1), var(--gray10));
            cursor: pointer;
            outline: transparent;
            appearance: none;
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
            transition: background-color var(--trans-dur), box-shadow var(--trans-dur), color var(--trans-dur);
        }

        .stepper__button:last-child {
            background-color: transparent;
            box-shadow: none;
            color: light-dark(var(--gray10), var(--gray1));
        }

        .stepper__icon {
            color: light-dark(var(--gray1), var(--gray10));
            display: grid;
            place-items: center;
            position: relative;
            transition: color var(--trans-dur), transform var(--trans-dur) var(--trans-timing);
        }

        .stepper__icon:last-child {
            color: light-dark(var(--gray10), var(--gray1));
        }

        .stepper__icon svg {
            width: 1.25em;
            height: auto;
        }

        .stepper__focus, .stepper__icons, .stepper__sr, .stepper__track {
            position: absolute;
        }

        .stepper__focus, .stepper__icons, .stepper__track {
            direction: ltr;
            display: flex;
        }

        .stepper__icons, .stepper__sr {
            overflow: hidden;
        }

        .stepper__focus, .stepper__icons {
            pointer-events: none;
        }

        .stepper__focus {
            inset: 0;
        }

        .stepper__focus-ring {
            border-radius: 1.125em 0 0 1.125em;
            box-shadow: 0 0 0 var(--border-width) transparent;
            transition: box-shadow 0.15s linear;
        }

        .stepper__focus-ring:last-child {
            border-radius: 0 1.125em 1.125em 0;
        }

        .stepper__icons {
            inset: var(--border-width);
        }

        .stepper__sr {
            width: 1px;
            height: 1px;
        }

        .stepper__track {
            inset: 0 0 0 auto;
            width: 200%;
            transition: transform var(--trans-dur) var(--trans-timing);
        }

        .stepper__wrapper:has(.stepper__button:last-child:disabled) .stepper__focus-ring:first-child, .stepper__wrapper:has(.stepper__button:first-child:disabled) .stepper__focus-ring:last-child {
            border-radius: 1.125em;
        }

        .stepper__wrapper:has(.stepper__button:first-child:focus-visible) .stepper__focus-ring:first-child, .stepper__wrapper:has(.stepper__button:last-child:focus-visible) .stepper__focus-ring:last-child {
            box-shadow: 0 0 0 var(--border-width) light-dark(var(--primary5), var(--primary4));
        }
    </style>
</head>
<body>
<div id="root"></div>

<script type="module">
    import React, { StrictMode, useState } from "https://esm.sh/react";
    import { createRoot } from "https://esm.sh/react-dom/client";
    import { Minus, Plus } from "https://esm.sh/lucide-react";

    createRoot(document.getElementById("root")).render(React.createElement(StrictMode, null,
        React.createElement("main", null,
            React.createElement(PillStepper, {min: 0, defaultValue: 6, max: 12}))));

    function PillStepper({min, defaultValue, max}) {
        // first deal with abnormal value choices
        const _min = Math.min(min, max);
        const _max = max;
        const _defaultValue = Math.max(Math.min(defaultValue, _max), _min);
        const [value, setValue] = useState(_defaultValue);
        // then position fill and icons based on relative value range
        const relativeRange = _max - _min;
        const relativeValue = value - _min;
        const percent = relativeValue / relativeRange || 0;
        const trackStyle = {
            transform: `translateX(${percent * 50}%)`
        };
        const iconStyle = {
            transform: `translateX(${(percent - 0.5) * 100}%)`
        };
        const focusStartStyle = {
            flex: `${percent}`
        };
        const focusEndStyle = {
            flex: `${(1 - percent)}`
        };
        return (React.createElement("div", {className: "stepper"},
            React.createElement("div", {className: "stepper__label"}, value),
            React.createElement("div", {className: "stepper__wrapper"},
                React.createElement("div", {className: "stepper__control"},
                    React.createElement("div", {className: "stepper__track", style: trackStyle},
                        React.createElement("button", {
                                className: "stepper__button",
                                type: "button",
                                onClick: () => setValue(val => Math.max(val - 1, _min)),
                                disabled: value === _min
                            },
                            React.createElement("span", {className: "stepper__sr"}, "Decrease")),
                        React.createElement("button", {
                                className: "stepper__button",
                                type: "button",
                                onClick: () => setValue(val => Math.min(val + 1, _max)),
                                disabled: value === _max
                            },
                            React.createElement("span", {className: "stepper__sr"}, "Increase"))),
                    React.createElement("div", {className: "stepper__icons"},
                        React.createElement("div", {className: "stepper__icon", style: iconStyle},
                            React.createElement(Minus, null)),
                        React.createElement("div", {className: "stepper__icon", style: iconStyle},
                            React.createElement(Plus, null)))),
                React.createElement("div", {className: "stepper__focus"},
                    React.createElement("div", {className: "stepper__focus-ring", style: focusStartStyle}),
                    React.createElement("div", {className: "stepper__focus-ring", style: focusEndStyle})))));
    }
</script>
</body>
</html>